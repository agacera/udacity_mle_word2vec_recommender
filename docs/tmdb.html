---

title: The Movie Database client
keywords: fastai
sidebar: home_sidebar

summary: "A simple client to work with the TMDB API"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/03_tmdb.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_api_key" class="doc_header"><code>load_api_key</code><a href="https://github.com/agacera/udacity_mle_word2vec_recommender/tree/master/word2vec_recommender/tmdb.py#L14" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_api_key</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="MovieData" class="doc_header"><code>class</code> <code>MovieData</code><a href="https://github.com/agacera/udacity_mle_word2vec_recommender/tree/master/word2vec_recommender/tmdb.py#L23" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>MovieData</code>(<strong><code>movie_id</code></strong>:<code>int</code>, <strong><code>tmdb_id</code></strong>:<code>int</code>, <strong><code>title</code></strong>:<code>str</code>, <strong><code>image_url</code></strong>:<code>str</code>)</p>
</blockquote>
<p>MovieData(movie_id: int, tmdb_id: int, title: str, image_url: str)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TmdbApi" class="doc_header"><code>class</code> <code>TmdbApi</code><a href="https://github.com/agacera/udacity_mle_word2vec_recommender/tree/master/word2vec_recommender/tmdb.py#L30" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TmdbApi</code>(<strong><code>api_key</code></strong>:<code>str</code>, <strong><code>movielens_to_tmdb_lookup</code></strong>:<code>dict</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">links_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/ml-latest-small/links.csv&quot;</span><span class="p">)</span>
<span class="n">links_df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>movieId</th>
      <th>imdbId</th>
      <th>tmdbId</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>114709</td>
      <td>862.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>113497</td>
      <td>8844.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>113228</td>
      <td>15602.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>114885</td>
      <td>31357.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>113041</td>
      <td>11862.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9737</th>
      <td>193581</td>
      <td>5476944</td>
      <td>432131.0</td>
    </tr>
    <tr>
      <th>9738</th>
      <td>193583</td>
      <td>5914996</td>
      <td>445030.0</td>
    </tr>
    <tr>
      <th>9739</th>
      <td>193585</td>
      <td>6397426</td>
      <td>479308.0</td>
    </tr>
    <tr>
      <th>9740</th>
      <td>193587</td>
      <td>8391976</td>
      <td>483455.0</td>
    </tr>
    <tr>
      <th>9741</th>
      <td>193609</td>
      <td>101726</td>
      <td>37891.0</td>
    </tr>
  </tbody>
</table>
<p>9742 rows Ã— 3 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movielens_to_tmdb_lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">int</span><span class="p">(</span><span class="n">movie_id</span><span class="p">):</span><span class="nb">int</span><span class="p">(</span><span class="n">tmdb_id</span><span class="p">)</span>  <span class="k">for</span> <span class="n">movie_id</span><span class="p">,</span> <span class="n">tmdb_id</span> <span class="ow">in</span> <span class="n">links_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;movieId&quot;</span><span class="p">)[</span><span class="s2">&quot;tmdbId&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">movie_id</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tmdb_id</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>
<span class="nb">list</span><span class="p">(</span><span class="n">movielens_to_tmdb_lookup</span><span class="o">.</span><span class="n">items</span><span class="p">())[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[(1, 862),
 (2, 8844),
 (3, 15602),
 (4, 31357),
 (5, 11862),
 (6, 949),
 (7, 11860),
 (8, 45325),
 (9, 9091),
 (10, 710)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="n">TmdbApi</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">load_api_key</span><span class="p">(),</span> <span class="n">movielens_to_tmdb_lookup</span><span class="o">=</span><span class="n">movielens_to_tmdb_lookup</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tmdb_movie_id</span><span class="o">=</span><span class="mi">550</span>
<span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://api.themoviedb.org/3/movie/</span><span class="si">{tmdb_movie_id}</span><span class="s2">?api_key={load_api_key()}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;adult&#39;: False,
 &#39;backdrop_path&#39;: &#39;/mMZRKb3NVo5ZeSPEIaNW9buLWQ0.jpg&#39;,
 &#39;belongs_to_collection&#39;: None,
 &#39;budget&#39;: 63000000,
 &#39;genres&#39;: [{&#39;id&#39;: 18, &#39;name&#39;: &#39;Drama&#39;}],
 &#39;homepage&#39;: &#39;http://www.foxmovies.com/movies/fight-club&#39;,
 &#39;id&#39;: 550,
 &#39;imdb_id&#39;: &#39;tt0137523&#39;,
 &#39;original_language&#39;: &#39;en&#39;,
 &#39;original_title&#39;: &#39;Fight Club&#39;,
 &#39;overview&#39;: &#39;A ticking-time-bomb insomniac and a slippery soap salesman channel primal male aggression into a shocking new form of therapy. Their concept catches on, with underground &#34;fight clubs&#34; forming in every town, until an eccentric gets in the way and ignites an out-of-control spiral toward oblivion.&#39;,
 &#39;popularity&#39;: 38.803,
 &#39;poster_path&#39;: &#39;/adw6Lq9FiC9zjYEpOqfq03ituwp.jpg&#39;,
 &#39;production_companies&#39;: [{&#39;id&#39;: 508,
   &#39;logo_path&#39;: &#39;/7PzJdsLGlR7oW4J0J5Xcd0pHGRg.png&#39;,
   &#39;name&#39;: &#39;Regency Enterprises&#39;,
   &#39;origin_country&#39;: &#39;US&#39;},
  {&#39;id&#39;: 711,
   &#39;logo_path&#39;: &#39;/tEiIH5QesdheJmDAqQwvtN60727.png&#39;,
   &#39;name&#39;: &#39;Fox 2000 Pictures&#39;,
   &#39;origin_country&#39;: &#39;US&#39;},
  {&#39;id&#39;: 20555,
   &#39;logo_path&#39;: &#39;/hD8yEGUBlHOcfHYbujp71vD8gZp.png&#39;,
   &#39;name&#39;: &#39;Taurus Film&#39;,
   &#39;origin_country&#39;: &#39;DE&#39;},
  {&#39;id&#39;: 54051,
   &#39;logo_path&#39;: None,
   &#39;name&#39;: &#39;Atman Entertainment&#39;,
   &#39;origin_country&#39;: &#39;&#39;},
  {&#39;id&#39;: 54052,
   &#39;logo_path&#39;: None,
   &#39;name&#39;: &#39;Knickerbocker Films&#39;,
   &#39;origin_country&#39;: &#39;US&#39;},
  {&#39;id&#39;: 25,
   &#39;logo_path&#39;: &#39;/qZCc1lty5FzX30aOCVRBLzaVmcp.png&#39;,
   &#39;name&#39;: &#39;20th Century Fox&#39;,
   &#39;origin_country&#39;: &#39;US&#39;},
  {&#39;id&#39;: 4700,
   &#39;logo_path&#39;: &#39;/A32wmjrs9Psf4zw0uaixF0GXfxq.png&#39;,
   &#39;name&#39;: &#39;The Linson Company&#39;,
   &#39;origin_country&#39;: &#39;&#39;}],
 &#39;production_countries&#39;: [{&#39;iso_3166_1&#39;: &#39;DE&#39;, &#39;name&#39;: &#39;Germany&#39;},
  {&#39;iso_3166_1&#39;: &#39;US&#39;, &#39;name&#39;: &#39;United States of America&#39;}],
 &#39;release_date&#39;: &#39;1999-10-15&#39;,
 &#39;revenue&#39;: 100853753,
 &#39;runtime&#39;: 139,
 &#39;spoken_languages&#39;: [{&#39;iso_639_1&#39;: &#39;en&#39;, &#39;name&#39;: &#39;English&#39;}],
 &#39;status&#39;: &#39;Released&#39;,
 &#39;tagline&#39;: &#39;Mischief. Mayhem. Soap.&#39;,
 &#39;title&#39;: &#39;Fight Club&#39;,
 &#39;video&#39;: False,
 &#39;vote_average&#39;: 8.4,
 &#39;vote_count&#39;: 17672}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">api</span><span class="o">.</span><span class="n">fetch_movie_data_by_tmdb_id</span><span class="p">(</span><span class="n">tmdb_movie_id</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt;tmdb_movie_id 550
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>MovieData(movie_id=2959, tmdb_id=550, title=&#39;Fight Club&#39;, image_url=&#39;https://image.tmdb.org/t/p/w185/adw6Lq9FiC9zjYEpOqfq03ituwp.jpg&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">api</span><span class="o">.</span><span class="n">fetch_movie_data_by_movielens_id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">api</span><span class="o">.</span><span class="n">fetch_movie_data_by_tmdb_id</span><span class="p">(</span><span class="mi">862</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

